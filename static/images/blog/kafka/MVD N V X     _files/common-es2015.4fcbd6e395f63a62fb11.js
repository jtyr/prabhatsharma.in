(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{"/8P7":function(t,e,n){"use strict";n.d(e,"a",function(){return I}),n.d(e,"b",function(){return j});var i=n("Mlb/"),s=n("yY3M"),r=n("tNQ3"),l=n("Myyq"),a=n("jmHW"),u=n("pk7F"),o=n("Ienz"),c=n("P6pJ"),d=n("vk2e"),h=n("Htug"),p=n("nJV+"),b=n("mmKu"),g=n("/1O+"),f=n("Kfqh"),m=n("BRL0"),y=n("ba/H"),I=(n("8w13"),n("rMqR"),n("GKMj"),n("0KxO"),i.sb({encapsulation:2,styles:[],data:{}}));function E(t){return i.Qb(0,[(t()(),i.ub(0,0,null,null,1,"server-error",[],null,null,null,s.b,s.a)),i.tb(1,573440,null,0,r.a,[l.a],{error:[0,"error"]},null)],function(t,e){t(e,1,0,e.component.apiError)},null)}function S(t){return i.Qb(0,[(t()(),i.ub(0,0,null,null,3,"div",[],null,null,null,null,null)),(t()(),i.Ob(1,null,["",""])),i.Jb(2,{month:0,year:1}),i.Kb(3,2)],null,function(t,e){var n=e.component,s=i.Pb(e,1,0,t(e,3,0,i.Gb(e.parent.parent.parent,0),"CBL.BILLING.PAYMENT_EXPIRATION",t(e,2,0,n.defaultPaymentSource.expiration_month,n.defaultPaymentSource.expiration_year)));t(e,1,0,s)})}function v(t){return i.Qb(0,[(t()(),i.ub(0,0,null,null,3,"div",[["class","cb-text-color-warn"]],null,null,null,null,null)),(t()(),i.Ob(1,null,["",""])),i.Jb(2,{month:0,year:1}),i.Kb(3,2)],null,function(t,e){var n=e.component,s=i.Pb(e,1,0,t(e,3,0,i.Gb(e.parent.parent.parent,0),"CBL.BILLING.PAYMENT_EXPIRATION_EXPIRED",t(e,2,0,n.defaultPaymentSource.expiration_month,n.defaultPaymentSource.expiration_year)));t(e,1,0,s)})}function O(t){return i.Qb(0,[(t()(),i.ub(0,0,null,null,4,"button",[["class","mat-warn"],["mat-button",""]],[[1,"disabled",0],[2,"_mat-animation-noopable",null]],[[null,"click"]],function(t,e,n){var i=!0;return"click"===e&&(i=!1!==t.component.removeCard(n)&&i),i},a.d,a.b)),i.tb(1,180224,null,0,u.b,[i.k,o.f,[2,c.a]],null,null),(t()(),i.Ob(2,0,[" "," "])),i.Kb(3,1),i.Kb(4,1)],null,function(t,e){t(e,0,0,i.Gb(e,1).disabled||null,"NoopAnimations"===i.Gb(e,1)._animationMode);var n=i.Pb(e,2,0,t(e,4,0,i.Gb(e.parent.parent.parent,1),i.Pb(e,2,0,t(e,3,0,i.Gb(e.parent.parent.parent,0),"CBL.BILLING.REMOVE_CARD"))));t(e,2,0,n)})}function C(t){return i.Qb(0,[(t()(),i.ub(0,0,null,null,15,null,null,null,null,null,null,null)),(t()(),i.ub(1,0,null,null,6,"div",[["class","payment-source-text layout-column"]],null,null,null,null,null)),(t()(),i.ub(2,0,null,null,1,"div",[["class","cb-font-weight-bold cb-margin-small-bottom"]],null,null,null,null,null)),(t()(),i.Ob(3,null,[""," ****",""])),(t()(),i.kb(16777216,null,null,1,null,S)),i.tb(5,16384,null,0,d.p,[i.P,i.L],{ngIf:[0,"ngIf"]},null),(t()(),i.kb(16777216,null,null,1,null,v)),i.tb(7,16384,null,0,d.p,[i.P,i.L],{ngIf:[0,"ngIf"]},null),(t()(),i.ub(8,0,null,null,0,"span",[["class","flex"]],null,null,null,null,null)),(t()(),i.kb(16777216,null,null,1,null,O)),i.tb(10,16384,null,0,d.p,[i.P,i.L],{ngIf:[0,"ngIf"]},null),(t()(),i.ub(11,0,null,null,4,"button",[["class","mat-primary"],["mat-button",""]],[[1,"disabled",0],[2,"_mat-animation-noopable",null]],null,null,a.d,a.b)),i.tb(12,180224,null,0,u.b,[i.k,o.f,[2,c.a]],null,null),(t()(),i.Ob(13,0,[" "," "])),i.Kb(14,1),i.Kb(15,1)],function(t,e){var n=e.component;t(e,5,0,!n.isExpired),t(e,7,0,n.isExpired),t(e,10,0,n.allowRemove)},function(t,e){var n=e.component;t(e,3,0,n.defaultPaymentSource.brand,n.defaultPaymentSource.last4),t(e,11,0,i.Gb(e,12).disabled||null,"NoopAnimations"===i.Gb(e,12)._animationMode);var s=i.Pb(e,13,0,t(e,15,0,i.Gb(e.parent.parent,1),i.Pb(e,13,0,t(e,14,0,i.Gb(e.parent.parent,0),"CBL.BILLING.UPDATE_CARD"))));t(e,13,0,s)})}function _(t){return i.Qb(0,[(t()(),i.ub(0,0,null,null,6,null,null,null,null,null,null,null)),(t()(),i.ub(1,0,null,null,1,"icon",[["class","cb-margin-large-right"],["key","credit-card"],["size","xxxlarge"]],[[8,"className",0]],null,null,h.b,h.a)),i.tb(2,573440,null,0,p.a,[d.e,i.k],{key:[0,"key"],size:[1,"size"],class:[2,"class"]},null),(t()(),i.kb(16777216,null,null,1,null,E)),i.tb(4,16384,null,0,d.p,[i.P,i.L],{ngIf:[0,"ngIf"]},null),(t()(),i.kb(16777216,null,null,1,null,C)),i.tb(6,16384,null,0,d.p,[i.P,i.L],{ngIf:[0,"ngIf"],ngIfElse:[1,"ngIfElse"]},null),(t()(),i.kb(0,null,null,0))],function(t,e){var n=e.component;t(e,2,0,"credit-card","xxxlarge","cb-margin-large-right"),t(e,4,0,n.apiError),t(e,6,0,n.defaultPaymentSource,i.Gb(e.parent,6))},function(t,e){t(e,1,0,i.Gb(e,2).classes)})}function A(t){return i.Qb(0,[(t()(),i.ub(0,0,null,null,2,"span",[["class","cb-font-weight-bold"]],null,null,null,null,null)),(t()(),i.Ob(1,null,["",""])),i.Kb(2,1)],null,function(t,e){var n=i.Pb(e,1,0,t(e,2,0,i.Gb(e.parent,0),"CBL.BILLING.ADD_METHOD"));t(e,1,0,n)})}function T(t){return i.Qb(0,[(t()(),i.ub(0,0,null,null,1,"mat-spinner",[["class","mat-spinner mat-progress-spinner"],["diameter","36"],["mode","indeterminate"],["role","progressbar"]],[[2,"_mat-animation-noopable",null],[4,"width","px"],[4,"height","px"]],null,null,b.d,b.b)),i.tb(1,114688,null,0,g.d,[i.k,f.a,[2,d.e],[2,c.a],g.a],{diameter:[0,"diameter"]},null)],function(t,e){t(e,1,0,"36")},function(t,e){t(e,0,0,i.Gb(e,1)._noopAnimations,i.Gb(e,1).diameter,i.Gb(e,1).diameter)})}function j(t){return i.Qb(0,[i.Ib(0,m.a,[y.a]),i.Ib(0,d.B,[]),(t()(),i.ub(2,0,null,null,5,"div",[["class","layout-row layout-align-start-center"]],[[1,"aria-label",0]],[[null,"click"]],function(t,e,n){var i=!0;return"click"===e&&(i=!1!==t.component.showAddPaymentDialog()&&i),i},null,null)),i.Kb(3,1),(t()(),i.kb(16777216,null,null,1,null,_)),i.tb(5,16384,null,0,d.p,[i.P,i.L],{ngIf:[0,"ngIf"],ngIfElse:[1,"ngIfElse"]},null),(t()(),i.kb(0,[["addPaymentSource",2]],null,0,null,A)),(t()(),i.kb(0,[["loading",2]],null,0,null,T))],function(t,e){t(e,5,0,e.component.loaded,i.Gb(e,7))},function(t,e){var n=i.Pb(e,2,0,t(e,3,0,i.Gb(e,0),"CBL.BILLING.PAYMENT_INFO"));t(e,2,0,n)})}},AXUe:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var i=n("lgVn");class s{constructor(t,e,n){this.cardUtil=t,this.metadataService=e,this.themeService=n}compareEntities(t,e,n,i,s){let r=[];const l=n.slice(0);return l.unshift(e),i.forEach(e=>{const n=this.getSectionUiData(t,l,e,s);if(n&&n.length){const t=this.themeService.isPartnerTheme(e.themeId);r.push({section:Object.assign({},e,{isPartnerTheme:t}),cards:n})}}),{sections:r,entityIdentifiers:this.getEntityIdentifiers(t,l,s)}}getSectionUiData(t,e,n,s){return n.cards.map(n=>{const r=this.getCardUiData(t,e,s,n);return n.type_id===i.m.TypeIdEnum.big_values&&(r.fields=r.fields.reduce((t,e)=>(t.length<2&&e.entityData[0].data&&t.push(e),t),[])),r}).filter(t=>!!t.fields.length)}getCardUiData(t,e,n,i){const s=this.cardUtil.getFieldItems(t,i.field_ids),r=this.getCardValuesForEntities(i.id,n),l=s.map(t=>{let i=!1;const s=e.map(e=>{const s=this.cardUtil.getEntityFieldValue(n[e],t.field.id,r[e]);return s.data&&(i=!0),s});if(i)return{fieldItem:t,entityData:s}}).filter(t=>!!t);return{typeId:i.type_id,labels:i.labels,fields:l}}getCardValuesForEntities(t,e){return Object.keys(e).reduce((n,i)=>(n[i]=e[i].cards[t],n),{})}getEntityIdentifiers(t,e,n){let i=this.metadataService.getField(t,"identifier");return e.map(t=>({field:i,fieldData:n[t].properties.identifier}))}}},G9Bg:function(t,e,n){"use strict";n.d(e,"a",function(){return r});var i=n("lgVn");const s=[i.m.TypeIdEnum.big_values,i.m.TypeIdEnum.fields];class r{constructor(t,e,n,i){this.store=t,this.entityComparisonFormatter=e,this.entityService=n,this.metadataService=i}compare(t,e,n,i,s){return this.updateCaches(t,e,i,s),this.entityDefIdOrCollectionId=t,this.baseEntityId=e,this.otherEntities=n,this.layoutId=i||this.layoutId,this.facetIds=s||this.facetIds,this.loadEntityData().then(()=>this.entityComparisonFormatter.compareEntities(this.entityDefIdOrCollectionId,this.baseEntityId,this.otherEntities,this.getSections(),this.getEntitiesToCompare()))}loadEntityData(){const{entityDefIdOrCollectionId:t,baseEntityId:e,otherEntities:n}=this;return this.layoutId&&this.facetIds?this.store.loadEntities(t,e,n,this.getCardIds()):this.store.loadBaseEntityProperties(t,e).then(i=>(this.layoutId=i.properties.layout_id||this.metadataService.getDefaultLayout(t).id,this.facetIds=i.properties.facet_ids,this.store.loadEntities(t,e,n,this.getCardIds())))}getEntitiesToCompare(){const t={[this.baseEntityId]:this.store.getEntity(this.baseEntityId)};return this.otherEntities.reduce((t,e)=>(t[e]=this.store.getEntity(e),t),t)}getSectionsInTabCardsForSection(t){const e=t.cards.reduce((t,e)=>(e.type_id===i.m.TypeIdEnum.tabs&&t.push(e),t),[]),n=[];return e.forEach(t=>{t.section_ids.map(t=>{const e=this.metadataService.getSection(this.entityDefIdOrCollectionId,t),n=e.card_ids.map(t=>this.metadataService.getCard(this.entityDefIdOrCollectionId,t));return{id:e.id,labels:e.labels,cards:n,themeId:e.theme_id}}).forEach(t=>n.push(t))}),n}getSections(){return this.entityService.getSections(this.entityDefIdOrCollectionId,this.layoutId,this.facetIds,"view").reduce((t,e)=>(t.push(e),this.getSectionsInTabCardsForSection(e).forEach(e=>t.push(e)),t),[]).map(t=>(t.cards=t.cards.filter(t=>s.includes(t.type_id)),t)).filter(t=>!!t.cards.length)}getCardIds(){return this.getSections().reduce((t,e)=>t=t.concat(e.cards.map(t=>t.id)),[])}updateCaches(t,e,n,i){if(!this.entityDefIdOrCollectionId)return;const s=n&&n!==this.layoutId,r=i&&i.length&&this.facetIds.filter(t=>!i.includes(t)).length;(t!==this.entityDefIdOrCollectionId||e!==this.baseEntityId||s||r)&&this.store.resetCache()}}},Hucv:function(t,e,n){"use strict";var i=n("59BC"),s=n("jV/k"),r=n("WJAz"),l=n("9va6"),a=n("XA6Z"),u=n("O6Zd"),o=n("qIlG"),c=n("ENjH"),d=n("omos"),h=n("Mlb/"),p=n("kl5t"),b=n("7k2d"),g=n("AN3R"),f=n("ue+9"),m=n("Rtcc");let y=(()=>{class t{getSuggestionsQuery(t,e,n){const i=[];return t.length&&i.push({type:f.G.TypeEnum.predicate,field_id:"location_identifiers",operator_id:"includes",values:t}),e.length&&i.push({type:f.G.TypeEnum.predicate,field_id:"categories",operator_id:"includes",values:e}),{field_ids:[m.a.Fields.identifier],order:[{field_id:"rank_org_company",sort:f.F.SortEnum.asc}],query:i,limit:n}}}return t.ngInjectableDef=h.Ub({factory:function(){return new t},token:t,providedIn:"root"}),t})();var I=n("X1Od"),E=n("pJPm"),S=n("F5Xg");let v=(()=>{class t{constructor(t,e){this.apiHelperService=t,this.logService=e,this.logger=e.getLogger("RelevantCompanyApi")}dataRelevancyCollectionIdEntityIdGet(t,e){return this.dataRelevancyCollectionIdEntityIdGet$.apply(this,arguments).toPromise()}dataRelevancyCollectionIdEntityIdGet$(t,e){const n=`/v4/data/relevancy/${encodeURIComponent(String(t))}/${encodeURIComponent(String(e))}`;if(!t)throw new Error("Missing required parameter collection_id when calling dataRelevancyCollectionIdEntityIdGet");if(!e)throw new Error("Missing required parameter entity_id when calling dataRelevancyCollectionIdEntityIdGet");return this.logger.debug("Executing get request to "+n),this.apiHelperService.createResult("get",n,{params:{}})}}return t.ngInjectableDef=h.Ub({factory:function(){return new t(h.Vb(E.a),h.Vb(S.a))},token:t,providedIn:"root"}),t})();var O=n("Yaew"),C=n("Czb9");n.d(e,"a",function(){return _});let _=(()=>{class t{constructor(t,e,n,i,s,r,l,a){this.userAttributeService=t,this.searchApi=e,this.syntheticMdService=n,this.suggestedFollowsQueryBuilderService=i,this.myFollowsListService=s,this.relevantCompanyApi=r,this.entityIdentifierFetchService=l,this.usageEventsService=a,this.MAX_SUGGESTIONS_TO_REQUEST=15,this.MAX_RELEVANT_SUGGESTIONS=10}getSuggestions(){return this.getAllSuggestions().pipe(Object(a.a)(t=>{const e=Object(i.a)(t.map(t=>this.myFollowsListService.isEntityFollowed(t.identifier.uuid)));return Object(i.a)(Object(s.a)(t),e)}),Object(u.a)(([t,e])=>t.filter((t,n)=>!e[n])))}getRelevantOrDefaultSuggestions$(t){return this.getSuggestionsByRelevantCompanies$(t).pipe(Object(a.a)(t=>t.length?Object(s.a)(t):this.getSuggestions()))}dismissSuggestion(t){let e=this.getDismissedEntityIds();e.push(t.identifier.uuid),this.sendRelevantFeedback(!1,t),sessionStorage.setItem("similar-dismissed-profiles",JSON.stringify(e))}sendRelevantFeedback(t,e){this.usageEventsService.logUsageEvent("similar_entity_feedback",{entity_id:e.source,similar_entity_id:e.identifier.uuid,positive:t})}getDismissedEntityIds(){try{return JSON.parse(sessionStorage.getItem("similar-dismissed-profiles"))||[]}catch(t){return[]}}getSuggestionsByRelevantCompanies$(t){if(!t.length)return Object(s.a)([]);const e=new Set(this.getDismissedEntityIds());return Object(r.a)(t.map(t=>this.relevantCompanyApi.dataRelevancyCollectionIdEntityIdGet$("organization.companies",t).pipe(Object(u.a)(t=>t.data)))).pipe(Object(u.a)(e=>e.flatMap((e,n)=>e.map(e=>({source:t[n],suggestion:e})))),Object(a.a)(t=>{const e=t.length?Object(i.a)(t.map(t=>this.myFollowsListService.isEntityFollowed(t.suggestion.uuid).pipe(Object(o.a)()))):Object(s.a)([]);return Object(i.a)(Object(s.a)(t),e)}),Object(u.a)(([t,e])=>t.filter((t,n)=>!e[n])),Object(u.a)(t=>t.filter(t=>!e.has(t.suggestion.uuid))),Object(u.a)(t=>Object(l.uniqBy)(t.sort(this.sortByScore),t=>t.suggestion.uuid).slice(0,this.MAX_RELEVANT_SUGGESTIONS)),Object(a.a)(t=>{const e=t.length?Object(i.a)(t.map(t=>this.entityIdentifierFetchService.fetch(t.suggestion.uuid))):Object(s.a)([]);return Object(i.a)(Object(s.a)(t),e)}),Object(u.a)(([t,e])=>t.map((t,n)=>({identifier:e[n],source:t.source,score:t.suggestion.score}))))}sortByScore(t,e){return e.suggestion.score-t.suggestion.score}getAllSuggestions(){return Object(i.a)(this.getGenericSuggestions(),this.getSuggestionsByUserInterest()).pipe(Object(u.a)(([t,e])=>[...e,...t]))}getGenericSuggestions(){return this.fetchSuggestions([],[])}getSuggestionsByUserInterest(){return this.userAttributeService.getAttributes().pipe(Object(u.a)(t=>[t&&t[c.a.interest_locations]||[],t&&t[c.a.interest_categories]||[]]),Object(a.a)(([t,e])=>t.length||e.length?this.fetchSuggestions(t,e):Object(s.a)([])))}fetchSuggestions(t,e){const n=this.syntheticMdService.getAccountSetupFollowCollectionId(),i=this.suggestedFollowsQueryBuilderService.getSuggestionsQuery(t,e,this.MAX_SUGGESTIONS_TO_REQUEST);return this.searchApi.dataSearchesCollectionIdPost$(n,i).pipe(Object(u.a)(t=>(t.data.entities||[]).map(t=>t.properties.identifier).filter(d.b).map(t=>({identifier:t}))))}}return t.ngInjectableDef=h.Ub({factory:function(){return new t(h.Vb(p.a),h.Vb(b.a),h.Vb(g.a),h.Vb(y),h.Vb(I.a),h.Vb(v),h.Vb(O.a),h.Vb(C.a))},token:t,providedIn:"root"}),t})()},Xscq:function(t,e,n){"use strict";var i=n("EYJY"),s=n("YMV5"),r=n("1QWg");const l=Symbol("not-found");class a{constructor(t){this.debounceTimeMs=0,this.pendingRequests=[],this.params=Object.assign({maxBatchSize:r.a.SEARCH_LIMIT_FREEMIUM},t)}fetch(t){const e=new i.a;return Object(s.a)(()=>(this.enqueueRequest(t,e),e.asObservable()))}enqueueRequest(t,e){this.pendingRequests.length||setTimeout(()=>this.fetchPendingItems(),this.debounceTimeMs),this.pendingRequests.push([t,e])}fetchPendingItems(){let t=this.groupRequests(this.pendingRequests);for(;t.length;)this.fetchBatch(t.slice(0,this.params.maxBatchSize)),t=t.slice(this.params.maxBatchSize);this.pendingRequests=[]}groupRequests(t){const e=new Map;return t.forEach(([t,n])=>{e.has(t)?e.get(t).push(n):e.set(t,[n])}),Array.from(e)}fetchBatch(t){this.params.doFetch(t.map(t=>t[0])).subscribe({next:e=>{t.forEach(([t,n])=>{const i=e.find(e=>this.params.getFragmentId(e)===t);n.forEach(null==i?t=>t.error(l):t=>{t.next(i),t.complete()})})},error:e=>t.flatMap(([t,e])=>e).forEach(t=>t.error(e))})}}n.d(e,"a",function(){return a})},Yaew:function(t,e,n){"use strict";n.d(e,"a",function(){return d});var i=n("qlrW"),s=n.n(i),r=n("O6Zd"),l=n("Xscq"),a=n("1QWg"),u=n("Mlb/"),o=n("QfH7"),c=n("nkAL");let d=(()=>{class t{constructor(t,e){this.apolloClient=t,this.metadataService=e,this.batchFetchers=new Map}fetch(t){return this.getBatchFetcher("identifier").fetch(t).pipe(Object(r.a)(t=>t.properties.identifier))}getBatchFetcher(t){return this.batchFetchers.has(t)||this.batchFetchers.set(t,this.createBatchFetcher(t)),this.batchFetchers.get(t)}createBatchFetcher(t){return new l.a({doFetch:e=>this.doFetch(t,e),getFragmentId:t=>t.properties.identifier.uuid,maxBatchSize:a.a.SEARCH_LIMIT_FREEMIUM_IDENTIFIERS})}doFetch(t,e){const n=s()(this.getQuery(t));return this.apolloClient.query({query:n,variables:{entityIds:e}}).pipe(Object(r.a)(t=>t.data.collections.collection.entities))}getCollectionId(t){const e=this.metadataService.getEntityDef(t);return e&&e.collection_id}getQuery(t){const e=this.getCollectionId(t);return`query ${e}($entityIds: [UUID!]) {\n      collections {\n        collection: ${e}(query: {\n          properties:{\n            identifier: {\n              uuid: {\n                includes: $entityIds\n              }\n            }\n          }\n        }) {\n          entities(limit: 1000) {\n            properties {\n              identifier {\n                entity_def_id\n                uuid\n                value\n                permalink\n                image_id\n              }\n            }\n          }\n        }\n      }\n    }`}}return t.ngInjectableDef=u.Ub({factory:function(){return new t(u.Vb(o.b),u.Vb(c.a))},token:t,providedIn:"root"}),t})()},m33f:function(t,e,n){"use strict";n.d(e,"b",function(){return d}),n.d(e,"a",function(){return p});var i=n("59BC"),s=n("jV/k"),r=n("e6ST"),l=n("O6Zd"),a=n("WKA6"),u=n("XA6Z"),o=n("Mlb/"),c=n("kl5t"),d=function(t){return t.CREATE_ACCOUNT="CREATE_ACCOUNT",t.CREATE_SEARCH="CREATE_SEARCH",t.EDIT_SEARCH="EDIT_SEARCH",t.CREATE_LIST="CREATE_LIST",t.ADD_TO_FOLLOWS="ADD_TO_FOLLOWS",t.ENTITY_PROFILE="ENTITY_PROFILE",t}({});const h="pro_onboarding_progress";let p=(()=>{class t{constructor(t){this.userAttributesService=t}isOnboarding(){return Object(i.a)(this.userAttributesService.getAttributes(),this.getSteps()).pipe(Object(l.a)(([t,e])=>{const n=this.hasOnboardingAttribute(t),i=e.some(t=>!t.isComplete);return n&&i}))}markForOnboarding(){this.userAttributesService.setAttribute(h,[])}completeStep(t){return this.getSteps().pipe(Object(a.a)(1),Object(u.a)(e=>{let n=e.find(e=>e.type===t);return n?n.isComplete?Object(s.a)(e):(n.isComplete=!0,this.setSteps(e)):Object(r.a)(`${t} step not found`)}))}isStepComplete(t){return this.getSteps().pipe(Object(l.a)(e=>{let n=e.find(e=>e.type===t);return!!n&&n.isComplete}))}getCompletionPercentage(){return this.getSteps().pipe(Object(l.a)(t=>{const e=t.length;return t.filter(t=>t.isComplete).length/e}))}getSteps(){return this.userAttributesService.getAttributes().pipe(Object(l.a)(t=>this.completedTypesToSteps(this.attributeToStepTypes(t))))}setSteps(t){return this.userAttributesService.setAttribute(h,this.stepStatesToAttribute(t)).pipe(Object(l.a)(t=>this.completedTypesToSteps(this.attributeToStepTypes(t))))}attributeToStepTypes(t){let e=t&&t[h];return e?(Array.isArray(e)&&e||[]).map(t=>d[t]):[]}stepStatesToAttribute(t){return(t||[]).filter(t=>t.isComplete).map(t=>t.type)}completedTypesToSteps(t){return Object.keys(d).map(e=>({isComplete:t.includes(e),type:e}))}hasOnboardingAttribute(t){return!!t&&t.hasOwnProperty(h)}}return t.ngInjectableDef=o.Ub({factory:function(){return new t(o.Vb(c.a))},token:t,providedIn:"root"}),t})()},qf2h:function(t,e,n){"use strict";n.d(e,"a",function(){return i});class i{constructor(t){this.entityService=t,this.entities={}}getEntity(t){return this.entities[t]}removeEntityData(t){delete this.entities[t]}resetCache(){this.entities={}}loadEntities(t,e,n,i){const s=[e].concat(n);return Promise.all(s.map(e=>this.loadEntityCards(t,e,i)))}loadBaseEntityProperties(t,e){return this.entityService.getEntityData({collectionId:t,entityIdOrPermalink:e,fieldIds:["layout_id","facet_ids"]}).then(t=>t.data)}loadEntityCards(t,e,n){return this.getEntity(e)?Promise.resolve(this.getEntity(e)):this.entityService.getEntityCards(t,e,n).then(t=>(this.entities[e]=t.data,this.getEntity(e)))}}}}]);