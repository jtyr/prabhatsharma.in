(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{dPh1:function(l,n,e){"use strict";e.d(n,"a",function(){return M}),e.d(n,"b",function(){return E});var t=e("Mlb/"),a=e("pdeR"),i=e("kALn"),u=e("W9sv"),o=e("6YJn"),r=e("Kfqh"),d=e("P6pJ"),s=e("Htug"),b=e("nJV+"),c=e("vk2e"),p=e("a0ge"),m=e("9b0e"),h=e("Z7++"),f=e("QZuW"),G=e("rhKd"),g=e("BZv6"),v=e("Edtt"),y=e("6tPy"),_=e("6NBS"),I=e("e9Gc"),S=e("AN3R"),L=e("jmHW"),k=e("pk7F"),C=e("Ienz"),w=e("BRL0"),D=e("ba/H"),O=e("hHX/"),M=(e("yi+q"),e("X/tG"),e("aWYc"),e("nkAL"),e("Jt2c"),e("5EQ0"),e("Myyq"),e("F5Xg"),t.sb({encapsulation:2,styles:[],data:{}}));function P(l){return t.Qb(0,[(l()(),t.ub(0,0,null,null,22,"mat-form-field",[["appearance","outline"],["class","mat-input-outline-center-fix cb-width-100 mat-form-field"]],[[2,"mat-form-field-appearance-standard",null],[2,"mat-form-field-appearance-fill",null],[2,"mat-form-field-appearance-outline",null],[2,"mat-form-field-appearance-legacy",null],[2,"mat-form-field-invalid",null],[2,"mat-form-field-can-float",null],[2,"mat-form-field-should-float",null],[2,"mat-form-field-has-label",null],[2,"mat-form-field-hide-placeholder",null],[2,"mat-form-field-disabled",null],[2,"mat-form-field-autofilled",null],[2,"mat-focused",null],[2,"mat-accent",null],[2,"mat-warn",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null],[2,"_mat-animation-noopable",null]],null,null,a.b,a.a)),t.tb(1,7520256,null,9,i.c,[t.k,t.h,[2,u.h],[2,o.b],[2,i.a],r.a,t.y,[2,d.a]],{appearance:[0,"appearance"]},null),t.Mb(603979776,1,{_controlNonStatic:0}),t.Mb(335544320,2,{_controlStatic:0}),t.Mb(603979776,3,{_labelChildNonStatic:0}),t.Mb(335544320,4,{_labelChildStatic:0}),t.Mb(603979776,5,{_placeholderChild:0}),t.Mb(603979776,6,{_errorChildren:1}),t.Mb(603979776,7,{_hintChildren:1}),t.Mb(603979776,8,{_prefixChildren:1}),t.Mb(603979776,9,{_suffixChildren:1}),(l()(),t.ub(11,0,null,0,2,"icon",[["class","cb-margin-medium-right"],["color","primary"],["key","add"],["matPrefix",""]],[[8,"className",0]],null,null,s.b,s.a)),t.tb(12,573440,null,0,b.a,[c.e,t.k],{key:[0,"key"],color:[1,"color"],class:[2,"class"]},null),t.tb(13,16384,[[8,4]],0,i.h,[],null,null),(l()(),t.ub(14,16777216,null,1,8,"input",[["class","mat-autocomplete-trigger mat-input-element mat-form-field-autofill-control"],["matInput",""]],[[1,"autocomplete",0],[1,"role",0],[1,"aria-autocomplete",0],[1,"aria-activedescendant",0],[1,"aria-expanded",0],[1,"aria-owns",0],[1,"aria-haspopup",0],[2,"mat-input-server",null],[1,"id",0],[1,"placeholder",0],[8,"disabled",0],[8,"required",0],[1,"readonly",0],[1,"aria-describedby",0],[1,"aria-invalid",0],[1,"aria-required",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"focusin"],[null,"blur"],[null,"input"],[null,"keydown"],[null,"compositionstart"],[null,"compositionend"],[null,"focus"]],function(l,n,e){var a=!0;return"focusin"===n&&(a=!1!==t.Gb(l,15)._handleFocus()&&a),"blur"===n&&(a=!1!==t.Gb(l,15)._onTouched()&&a),"input"===n&&(a=!1!==t.Gb(l,15)._handleInput(e)&&a),"keydown"===n&&(a=!1!==t.Gb(l,15)._handleKeydown(e)&&a),"input"===n&&(a=!1!==t.Gb(l,16)._handleInput(e.target.value)&&a),"blur"===n&&(a=!1!==t.Gb(l,16).onTouched()&&a),"compositionstart"===n&&(a=!1!==t.Gb(l,16)._compositionStart()&&a),"compositionend"===n&&(a=!1!==t.Gb(l,16)._compositionEnd(e.target.value)&&a),"blur"===n&&(a=!1!==t.Gb(l,20)._focusChanged(!1)&&a),"focus"===n&&(a=!1!==t.Gb(l,20)._focusChanged(!0)&&a),"input"===n&&(a=!1!==t.Gb(l,20)._onInput()&&a),a},null,null)),t.tb(15,4866048,null,0,p.f,[t.k,m.c,t.P,t.y,t.h,p.b,[2,o.b],[2,i.c],[2,c.e],h.e],{autocomplete:[0,"autocomplete"]},null),t.tb(16,16384,null,0,f.e,[t.D,t.k,[2,f.b]],null,null),t.Lb(1024,null,f.u,function(l,n){return[l,n]},[p.f,f.e]),t.tb(18,540672,null,0,f.k,[[8,null],[8,null],[6,f.u],[2,f.J]],{form:[0,"form"]},null),t.Lb(2048,null,f.v,null,[f.k]),t.tb(20,999424,null,0,G.b,[t.k,r.a,[6,f.v],[2,f.y],[2,f.n],u.b,[8,null],g.a,t.y],{placeholder:[0,"placeholder"]},null),t.tb(21,16384,null,0,f.w,[[4,f.v]],null,null),t.Lb(2048,[[1,4],[2,4]],i.d,null,[G.b])],function(l,n){var e=n.component;l(n,1,0,"outline"),l(n,12,0,"add","primary","cb-margin-medium-right"),l(n,15,0,t.Gb(n.parent,10)),l(n,18,0,e.addInput),l(n,20,0,e.placeholderText)},function(l,n){l(n,0,1,["standard"==t.Gb(n,1).appearance,"fill"==t.Gb(n,1).appearance,"outline"==t.Gb(n,1).appearance,"legacy"==t.Gb(n,1).appearance,t.Gb(n,1)._control.errorState,t.Gb(n,1)._canLabelFloat,t.Gb(n,1)._shouldLabelFloat(),t.Gb(n,1)._hasFloatingLabel(),t.Gb(n,1)._hideControlPlaceholder(),t.Gb(n,1)._control.disabled,t.Gb(n,1)._control.autofilled,t.Gb(n,1)._control.focused,"accent"==t.Gb(n,1).color,"warn"==t.Gb(n,1).color,t.Gb(n,1)._shouldForward("untouched"),t.Gb(n,1)._shouldForward("touched"),t.Gb(n,1)._shouldForward("pristine"),t.Gb(n,1)._shouldForward("dirty"),t.Gb(n,1)._shouldForward("valid"),t.Gb(n,1)._shouldForward("invalid"),t.Gb(n,1)._shouldForward("pending"),!t.Gb(n,1)._animationsEnabled]),l(n,11,0,t.Gb(n,12).classes),l(n,14,1,[t.Gb(n,15).autocompleteAttribute,t.Gb(n,15).autocompleteDisabled?null:"combobox",t.Gb(n,15).autocompleteDisabled?null:"list",t.Gb(n,15).panelOpen&&t.Gb(n,15).activeOption?t.Gb(n,15).activeOption.id:null,t.Gb(n,15).autocompleteDisabled?null:t.Gb(n,15).panelOpen.toString(),t.Gb(n,15).autocompleteDisabled||!t.Gb(n,15).panelOpen?null:null==t.Gb(n,15).autocomplete?null:t.Gb(n,15).autocomplete.id,!t.Gb(n,15).autocompleteDisabled,t.Gb(n,20)._isServer,t.Gb(n,20).id,t.Gb(n,20).placeholder,t.Gb(n,20).disabled,t.Gb(n,20).required,t.Gb(n,20).readonly&&!t.Gb(n,20)._isNativeSelect||null,t.Gb(n,20)._ariaDescribedby||null,t.Gb(n,20).errorState,t.Gb(n,20).required.toString(),t.Gb(n,21).ngClassUntouched,t.Gb(n,21).ngClassTouched,t.Gb(n,21).ngClassPristine,t.Gb(n,21).ngClassDirty,t.Gb(n,21).ngClassValid,t.Gb(n,21).ngClassInvalid,t.Gb(n,21).ngClassPending])})}function F(l){return t.Qb(0,[(l()(),t.ub(0,0,null,null,19,"mat-form-field",[["class","flex-100 mat-form-field"],["floatLabel","never"]],[[2,"mat-form-field-appearance-standard",null],[2,"mat-form-field-appearance-fill",null],[2,"mat-form-field-appearance-outline",null],[2,"mat-form-field-appearance-legacy",null],[2,"mat-form-field-invalid",null],[2,"mat-form-field-can-float",null],[2,"mat-form-field-should-float",null],[2,"mat-form-field-has-label",null],[2,"mat-form-field-hide-placeholder",null],[2,"mat-form-field-disabled",null],[2,"mat-form-field-autofilled",null],[2,"mat-focused",null],[2,"mat-accent",null],[2,"mat-warn",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null],[2,"_mat-animation-noopable",null]],null,null,a.b,a.a)),t.tb(1,7520256,null,9,i.c,[t.k,t.h,[2,u.h],[2,o.b],[2,i.a],r.a,t.y,[2,d.a]],{floatLabel:[0,"floatLabel"]},null),t.Mb(603979776,10,{_controlNonStatic:0}),t.Mb(335544320,11,{_controlStatic:0}),t.Mb(603979776,12,{_labelChildNonStatic:0}),t.Mb(335544320,13,{_labelChildStatic:0}),t.Mb(603979776,14,{_placeholderChild:0}),t.Mb(603979776,15,{_errorChildren:1}),t.Mb(603979776,16,{_hintChildren:1}),t.Mb(603979776,17,{_prefixChildren:1}),t.Mb(603979776,18,{_suffixChildren:1}),(l()(),t.ub(11,16777216,null,1,8,"input",[["class","flex mat-autocomplete-trigger mat-input-element mat-form-field-autofill-control"],["matInput",""],["type","search"]],[[1,"autocomplete",0],[1,"role",0],[1,"aria-autocomplete",0],[1,"aria-activedescendant",0],[1,"aria-expanded",0],[1,"aria-owns",0],[1,"aria-haspopup",0],[2,"mat-input-server",null],[1,"id",0],[1,"placeholder",0],[8,"disabled",0],[8,"required",0],[1,"readonly",0],[1,"aria-describedby",0],[1,"aria-invalid",0],[1,"aria-required",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"focusin"],[null,"blur"],[null,"input"],[null,"keydown"],[null,"compositionstart"],[null,"compositionend"],[null,"focus"]],function(l,n,e){var a=!0;return"focusin"===n&&(a=!1!==t.Gb(l,12)._handleFocus()&&a),"blur"===n&&(a=!1!==t.Gb(l,12)._onTouched()&&a),"input"===n&&(a=!1!==t.Gb(l,12)._handleInput(e)&&a),"keydown"===n&&(a=!1!==t.Gb(l,12)._handleKeydown(e)&&a),"input"===n&&(a=!1!==t.Gb(l,13)._handleInput(e.target.value)&&a),"blur"===n&&(a=!1!==t.Gb(l,13).onTouched()&&a),"compositionstart"===n&&(a=!1!==t.Gb(l,13)._compositionStart()&&a),"compositionend"===n&&(a=!1!==t.Gb(l,13)._compositionEnd(e.target.value)&&a),"blur"===n&&(a=!1!==t.Gb(l,17)._focusChanged(!1)&&a),"focus"===n&&(a=!1!==t.Gb(l,17)._focusChanged(!0)&&a),"input"===n&&(a=!1!==t.Gb(l,17)._onInput()&&a),a},null,null)),t.tb(12,4866048,null,0,p.f,[t.k,m.c,t.P,t.y,t.h,p.b,[2,o.b],[2,i.c],[2,c.e],h.e],{autocomplete:[0,"autocomplete"]},null),t.tb(13,16384,null,0,f.e,[t.D,t.k,[2,f.b]],null,null),t.Lb(1024,null,f.u,function(l,n){return[l,n]},[p.f,f.e]),t.tb(15,540672,null,0,f.k,[[8,null],[8,null],[6,f.u],[2,f.J]],{form:[0,"form"]},null),t.Lb(2048,null,f.v,null,[f.k]),t.tb(17,999424,null,0,G.b,[t.k,r.a,[6,f.v],[2,f.y],[2,f.n],u.b,[8,null],g.a,t.y],{placeholder:[0,"placeholder"],type:[1,"type"]},null),t.tb(18,16384,null,0,f.w,[[4,f.v]],null,null),t.Lb(2048,[[10,4],[11,4]],i.d,null,[G.b])],function(l,n){var e=n.component;l(n,1,0,"never"),l(n,12,0,t.Gb(n.parent,10)),l(n,15,0,e.addInput),l(n,17,0,e.placeholderText,"search")},function(l,n){l(n,0,1,["standard"==t.Gb(n,1).appearance,"fill"==t.Gb(n,1).appearance,"outline"==t.Gb(n,1).appearance,"legacy"==t.Gb(n,1).appearance,t.Gb(n,1)._control.errorState,t.Gb(n,1)._canLabelFloat,t.Gb(n,1)._shouldLabelFloat(),t.Gb(n,1)._hasFloatingLabel(),t.Gb(n,1)._hideControlPlaceholder(),t.Gb(n,1)._control.disabled,t.Gb(n,1)._control.autofilled,t.Gb(n,1)._control.focused,"accent"==t.Gb(n,1).color,"warn"==t.Gb(n,1).color,t.Gb(n,1)._shouldForward("untouched"),t.Gb(n,1)._shouldForward("touched"),t.Gb(n,1)._shouldForward("pristine"),t.Gb(n,1)._shouldForward("dirty"),t.Gb(n,1)._shouldForward("valid"),t.Gb(n,1)._shouldForward("invalid"),t.Gb(n,1)._shouldForward("pending"),!t.Gb(n,1)._animationsEnabled]),l(n,11,1,[t.Gb(n,12).autocompleteAttribute,t.Gb(n,12).autocompleteDisabled?null:"combobox",t.Gb(n,12).autocompleteDisabled?null:"list",t.Gb(n,12).panelOpen&&t.Gb(n,12).activeOption?t.Gb(n,12).activeOption.id:null,t.Gb(n,12).autocompleteDisabled?null:t.Gb(n,12).panelOpen.toString(),t.Gb(n,12).autocompleteDisabled||!t.Gb(n,12).panelOpen?null:null==t.Gb(n,12).autocomplete?null:t.Gb(n,12).autocomplete.id,!t.Gb(n,12).autocompleteDisabled,t.Gb(n,17)._isServer,t.Gb(n,17).id,t.Gb(n,17).placeholder,t.Gb(n,17).disabled,t.Gb(n,17).required,t.Gb(n,17).readonly&&!t.Gb(n,17)._isNativeSelect||null,t.Gb(n,17)._ariaDescribedby||null,t.Gb(n,17).errorState,t.Gb(n,17).required.toString(),t.Gb(n,18).ngClassUntouched,t.Gb(n,18).ngClassTouched,t.Gb(n,18).ngClassPristine,t.Gb(n,18).ngClassDirty,t.Gb(n,18).ngClassValid,t.Gb(n,18).ngClassInvalid,t.Gb(n,18).ngClassPending])})}function x(l){return t.Qb(0,[(l()(),t.ub(0,0,null,null,24,"mat-option",[["class","mat-option"],["role","option"]],[[1,"tabindex",0],[2,"mat-selected",null],[2,"mat-option-multiple",null],[2,"mat-active",null],[8,"id",0],[1,"aria-selected",0],[1,"aria-disabled",0],[2,"mat-option-disabled",null]],[[null,"click"],[null,"keydown"]],function(l,n,e){var a=!0;return"click"===n&&(a=!1!==t.Gb(l,1)._selectViaInteraction()&&a),"keydown"===n&&(a=!1!==t.Gb(l,1)._handleKeydown(e)&&a),a},v.e,v.b)),t.tb(1,8568832,[[19,4]],0,u.p,[t.k,t.h,[2,u.j],[2,u.o]],null,null),(l()(),t.ub(2,0,null,0,22,"div",[["class","quick-add-row layout-row layout-align-start-center"]],[[1,"aria-label",0]],[[null,"click"]],function(l,n,e){var t=!0;return"click"===n&&(t=!1!==l.component.handleItemClick(l.context.$implicit,e)&&t),t},null,null)),t.Kb(3,1),(l()(),t.ub(4,0,null,null,1,"identifier-image",[["class","flex-none"]],null,null,null,y.b,y.a)),t.tb(5,573440,null,0,_.a,[I.a,S.a],{identifier:[0,"identifier"]},null),(l()(),t.ub(6,0,null,null,5,"div",[["class","entityInfo flex"]],null,null,null,null,null)),(l()(),t.ub(7,0,null,null,1,"span",[["class","cb-display-block"]],null,null,null,null,null)),(l()(),t.Ob(8,null,[" "," "])),(l()(),t.ub(9,0,null,null,2,"span",[["class","cb-display-block"]],null,null,null,null,null)),(l()(),t.ub(10,0,null,null,1,"span",[["class","contextual-info flex"]],null,null,null,null,null)),(l()(),t.Ob(11,null,[" "," "])),(l()(),t.ub(12,0,null,null,12,"div",[["class","button-wrapper"]],null,null,null,null,null)),(l()(),t.ub(13,0,null,null,5,"div",[["class","add-icon-button"]],null,null,null,null,null)),(l()(),t.ub(14,0,null,null,4,"button",[["mat-icon-button",""]],[[1,"aria-label",0],[1,"disabled",0],[2,"_mat-animation-noopable",null]],null,null,L.d,L.b)),t.tb(15,180224,null,0,k.b,[t.k,C.f,[2,d.a]],null,null),t.Kb(16,1),(l()(),t.ub(17,0,null,0,1,"icon",[["color","primary"]],[[8,"className",0]],null,null,s.b,s.a)),t.tb(18,573440,null,0,b.a,[c.e,t.k],{key:[0,"key"],color:[1,"color"]},null),(l()(),t.ub(19,0,null,null,5,"div",[["class","remove-icon-button"]],null,null,null,null,null)),(l()(),t.ub(20,0,null,null,4,"button",[["mat-icon-button",""]],[[1,"aria-label",0],[1,"disabled",0],[2,"_mat-animation-noopable",null]],null,null,L.d,L.b)),t.tb(21,180224,null,0,k.b,[t.k,C.f,[2,d.a]],null,null),t.Kb(22,1),(l()(),t.ub(23,0,null,0,1,"icon",[["color","primary"]],[[8,"className",0]],null,null,s.b,s.a)),t.tb(24,573440,null,0,b.a,[c.e,t.k],{key:[0,"key"],color:[1,"color"]},null)],function(l,n){var e=n.component;l(n,5,0,n.context.$implicit.identifier),l(n,18,0,e.entityIdsInList.has(n.context.$implicit.id)?"check":"add","primary"),l(n,24,0,e.entityIdsInList.has(n.context.$implicit.id)?"remove":"add","primary")},function(l,n){var e=n.component;l(n,0,0,t.Gb(n,1)._getTabIndex(),t.Gb(n,1).selected,t.Gb(n,1).multiple,t.Gb(n,1).active,t.Gb(n,1).id,t.Gb(n,1)._getAriaSelected(),t.Gb(n,1).disabled.toString(),t.Gb(n,1).disabled);var a=t.Pb(n,2,0,l(n,3,0,t.Gb(n.parent,0),"CBL.COMMON.ADD"));l(n,2,0,a),l(n,8,0,n.context.$implicit.value),l(n,11,0,e.getContextualInfo(n.context.$implicit));var i=t.Pb(n,14,0,l(n,16,0,t.Gb(n.parent,0),"CBL.COMMON.ADD"));l(n,14,0,i,t.Gb(n,15).disabled||null,"NoopAnimations"===t.Gb(n,15)._animationMode),l(n,17,0,t.Gb(n,18).classes);var u=t.Pb(n,20,0,l(n,22,0,t.Gb(n.parent,0),"CBL.COMMON.REMOVE"));l(n,20,0,u,t.Gb(n,21).disabled||null,"NoopAnimations"===t.Gb(n,21)._animationMode),l(n,23,0,t.Gb(n,24).classes)})}function E(l){return t.Qb(2,[t.Ib(0,w.a,[D.a]),(l()(),t.ub(1,0,null,null,14,"div",[["class","component--quick-add layout-row"]],null,null,null,null,null)),t.Lb(512,null,c.F,c.G,[t.r,t.s,t.k,t.D]),t.tb(3,278528,null,0,c.n,[c.F],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),(l()(),t.kb(16777216,null,null,1,null,P)),t.tb(5,16384,null,0,c.p,[t.P,t.L],{ngIf:[0,"ngIf"]},null),(l()(),t.kb(16777216,null,null,1,null,F)),t.tb(7,16384,null,0,c.p,[t.P,t.L],{ngIf:[0,"ngIf"]},null),(l()(),t.ub(8,0,null,null,7,"mat-autocomplete",[["class","mat-autocomplete"]],null,null,null,O.b,O.a)),t.Lb(6144,null,u.j,null,[p.d]),t.tb(10,1097728,[["auto",4]],2,p.d,[t.h,t.k,p.a],null,null),t.Mb(603979776,19,{options:1}),t.Mb(603979776,20,{optionGroups:1}),(l()(),t.kb(16777216,null,0,2,null,x)),t.tb(14,278528,null,0,c.o,[t.P,t.L,t.r],{ngForOf:[0,"ngForOf"]},null),t.Ib(131072,c.b,[t.h])],function(l,n){var e=n.component;l(n,3,0,"component--quick-add layout-row","appearance-"+e.appearance),l(n,5,0,"tall"===e.appearance),l(n,7,0,"narrow"===e.appearance),l(n,14,0,t.Pb(n,14,0,t.Gb(n,15).transform(e.items)))},null)}},"yi+q":function(l,n,e){"use strict";e.d(n,"a",function(){return p});var t=e("9va6"),a=e("EYJY"),i=e("HbWZ"),u=e("S5zL"),o=e("+3x0"),r=e("unWr"),d=e("ccoi"),s=e("Mlb/"),b=e("QZuW"),c=e("yYL6");let p=(()=>{class l{constructor(l,n,e,t,i,u,o,r){this.autocompleteService=l,this.listService=n,this.metadataService=e,this.progressService=t,this.toastService=i,this.labelsService=u,this.errorService=o,this.logService=r,this.itemAdded=new s.m,this.itemRemoved=new s.m,this.addInput=new b.j,this.entityIdsInList=new Set,this.onDestroy=new a.a}ngOnInit(){this.logger=this.logService.getLogger("QuickAddComponent"),this.subscribeToListChanges(),this.items=this.addInput.valueChanges.pipe(Object(u.a)(),Object(o.a)(400),Object(r.a)(l=>Object(i.a)(this.query(l))))}ngOnChanges(l){l.initialEntityIdsInList&&(this.entityIdsInList=new Set(l.initialEntityIdsInList.currentValue)),(l.collectionId||l.placeholder)&&(this.placeholderText=this.placeholder||this.getDefaultPlaceholder())}ngOnDestroy(){this.onDestroy.next()}handleItemClick(l,n){n.stopPropagation(),n.preventDefault(),this.entityIdsInList.has(l.id)?this.removeFromList(l):this.addToList(l),this.addInput.setValue(null)}getContextualInfo(l){let n=[],e=this.autocompleteService.getEntityDefLabel(l.entityDefId);return e&&n.push(e),l.description&&n.push(l.description),n.join(" \u2022 ")}clearInput(){this.addInput.setValue(null)}getDefaultPlaceholder(){if(this.metadataService.isIdentifierEntity(this.collectionId))return this.labelsService.getLabel("CBL.LISTS.QUICK_ADD");let l=this.metadataService.getEntityDef(this.collectionId),n=Object(t.toLower)(l.labels.singular);return this.labelsService.getInterpolatedLabel("CBL.LISTS.QUICK_ADD_ENTITY",{entity:n})}subscribeToListChanges(){this.listService.getListItemsChangeSubjectObservable().pipe(Object(d.a)(this.onDestroy)).subscribe(l=>this.updateEntityIdsInList(l))}updateEntityIdsInList(l){if(l.listId===this.listId){const{entityIds:n,eventType:e}=l;n.forEach(e===c.a.ADD?l=>this.entityIdsInList.add(l):l=>this.entityIdsInList.delete(l))}}query(l){let n;return l?(n=this.metadataService.isIdentifierEntity(this.collectionId)?this.autocompleteService.query(l):this.autocompleteService.query(l,[this.collectionId])).then(l=>this.handleResults(l),l=>Promise.resolve([])):Promise.resolve([])}addToList(n){this.progressService.startProgress(l.PROGRESS_ID),this.listService.addEntryToList(this.listId,n.id).then(l=>{this.itemAdded.emit()},l=>this.handleApiError(l)).then(()=>{this.progressService.stopProgress(l.PROGRESS_ID)})}removeFromList(n){this.progressService.startProgress(l.PROGRESS_ID),this.listService.removeEntryFromList(this.listId,n.id).then(l=>{this.itemRemoved.emit()},l=>this.handleApiError(l)).then(()=>{this.progressService.stopProgress(l.PROGRESS_ID)})}handleApiError(l){let n=this.errorService.getSingleLabel(l,"CBL.COMMON.FAILURE");this.toastService.showSimpleToast(n)}handleResults(l){let n=[];return l&&l.data&&l.data.entities?n=l.data.entities.map(l=>{let n=l.identifier;return{identifier:n,id:n.uuid,value:n.value,description:l.short_description,entityDefId:n.entity_def_id}}):this.logger.error("Attempted to update results with invalid results data",l),Promise.resolve(n)}}return l.PROGRESS_ID="quick-add",l})()}}]);